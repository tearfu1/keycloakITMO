**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ansible-—Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Keycloak**

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

## üìï **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

- –ö–∞–∫ –ø–æ–¥–Ω–∏–º–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã –≤ Vagrant https://gitlab.com/deusops/lessons/documentation/vagrant
- –ü–æ–¥–±–æ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ Ansible –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—é —Ä–æ–ª–µ–π
https://gitlab.com/deusops/lessons/documentation/ansible
- –ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–µ–Ω keycloak
https://habr.com/ru/company/southbridge/blog/654475/
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Keycloak –Ω–∞ Ubuntu
https://cloudinfrastructureservices.co.uk/install-keycloak-sso-on-ubuntu-20-04/
https://itdraft.ru/2022/08/29/ustanovka-keycloak-i-postgesql-v-linux-centos-rocky-debian/
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∞–ª–º–∞ –≤ Keycloak
https://zzamzam.dev/posts/2022-03-16-keycloak-realm-settings/
- Keycloak –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
https://www.keycloak.org/docs/18.0/server_installation/#_standalone-ha-mode
https://www.keycloak.org/docs/18.0/server_installation/#_clustering
- Google-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Keycloak
https://keycloakthemes.com/blog/how-to-setup-sign-in-with-google-using-keycloak
- –ú–µ—Ç–æ–¥—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ Keycloak
https://www.keycloak.org/2019/05/keycloak-cluster-setup.html
- –û—Å–Ω–æ–≤—ã Helm
https://habr.com/ru/post/547682/

## ‚úÖ **–ß–µ–∫–ø–æ–π–Ω—Ç—ã –ø–æ —É—Ä–æ–≤–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:**

### **üü¢ Light**

1. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–≤–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—É c linux: keycloak01 –∏ db01. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ —Ö–æ—Å—Ç–∏–Ω–≥–∏ –∏ —Å–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Vagrant
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Postgresql –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É ‚Äúdb01‚Äù. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö keycloak –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–π
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å standalone —Å–µ—Ä–≤–µ—Ä keycloak –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É ‚Äúkeycloak01‚Äù
4. –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∞–ª–º –≤ keycloak —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
5. –°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω —Ö–æ—Å—Ç - keycloak02 –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å keycloak –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∞—Å—Ç–µ—Ä–∞. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –º–µ—Ö–∞–Ω–∏–∑–º–∞—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ö–æ—Å—Ç–æ–≤ –∫–µ–π–∫–ª–æ–∫–æ–º.

### **üü° Normal**

1. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å ansible-–ø–ª–µ–π–±—É–∫ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ keycloak –Ω–∞ —Ö–æ—Å—Ç–µ. –°–æ–∑–¥–∞—Ç—å inventory, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ö–æ—Å—Ç–∞–º–∏ vagrant, –∫–∞–∫ dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
2. –í—ã–Ω–µ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –∏–∑ –ø–ª–µ–π–±—É–∫–∞ –∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é ansible-—Ä–æ–ª—å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ keycloak. –£—á–µ—Å—Ç—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤–∞—Ç—å—Å—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ä–æ–ª–∏:  `keycloak_` 
3. –ü—Ä–æ–¥—É–º–∞—Ç—å feature-toggle: –º–µ—Ö–∞–Ω–∏–∑–º –≤–∫–ª—é—á–µ–Ω–∏—è –æ–ø—Ü–∏–∏ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ–∞–ª–º–∞
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å molecule –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ä–æ–ª–∏ —Ç–µ—Å—Ç–∞–º–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º ansible-galaxy –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–æ–ª–∏
5. –ü—Ä–æ–¥—É–º–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ keycloak —á–µ—Ä–µ–∑ ansible-—Ä–æ–ª—å –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

### **üî¥ Hard**

1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É: –∫–ª–∞—Å—Ç–µ—Ä kubernetes –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö–æ—Å—Ç –¥–ª—è postgresql. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã –∏ –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–¥–∞–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
2. –ò—Å–ø–æ–ª—å–∑—É—è helm, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å keycloak (standalone) –≤ kubernetes. –û–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –∏–∑–≤–Ω–µ
3. –û–±–µ—Å–ø–µ—á–∏—Ç—å –≤—ã—Å–æ–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—è keycloak –≤ —Ä–µ–∂–∏–º–µ HA-–∫–ª–∞—Å—Ç–µ—Ä–∞. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞ (JDBC ping, DNS ping, TCPPING –∏ —Ç–¥)
